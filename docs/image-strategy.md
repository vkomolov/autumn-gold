
# 🖼️ Image Strategy in This Project:
This project uses a **hybrid image strategy** to support both optimized local images and dynamic external images 
(e.g., from a headless CMS like Strapi).

This approach provides full support for Next.js `StaticImageData`-based 
optimization without sacrificing the flexibility of dynamic content.

## 📁 Project Structure:

```
src/
├─ assets/
│  └─ images/
│     ├─ logo/
│     │  └─ logo-autumn.webp
│     └─ products/
│         └─ item-1.webp
├─ lib/
│  └─ generated/
│     └─ imageMap.ts ← this file will be automatically generated
```

## 💡 Key Concepts

### 1. **Generated Images**
Images stored locally in `src/assets/images/**` can be processed and used with Next.js's `next/image` component with 
full optimization. These are registered during build time by the script `scripts/processImages.mjs`.
Each image is added to a generated `imageMap` with a key that follows the format:
"generated-<filename.ext>"

Example:
```ts
import { imageMap } from "@/lib/generated/imageMap";
const img = imageMap["generated-logo-autumn.webp"];
```
These images are pre-optimized, include dimensions, and support blur placeholders, lazy loading, etc.

### 2. Dynamic Images
When an image source does not start with generated-, it is treated as a dynamic or external image — either from the public/ folder or from a remote CDN.
Example:
<Image
  src="/images/hero-banner.webp" // served from /public
  alt="Hero banner"
  ...
/>
Or:
<Image
  src="https://cdn.example.com/product-1.webp"
  alt="Product"
  ...
/>

## 🔁 How the Component Works:
```
import { imageMap } from "@/lib/generated/imageMap";

export const SomeComponent = ({ src, alt, ...rest }) => {
  const isGenerated = src.startsWith("generated-");
  const image = isGenerated ? imageMap[src] : src;

  return <Image src={image} alt={alt} {...rest} />;
};
```

## 🧩 CMS Integration Guidelines
In your CMS (e.g., Strapi), when linking to an image:
•	If it references a locally optimized image, store the key as:  
•	generated-logo-autumn.webp  
•	If the image is served from public/ or an external source, just store the full path or URL:  
•	/images/team-photo.jpg  
•	https://cdn.example.com/banner.png
________________________________________
## ⚙️ Developer Notes
•	The file src/lib/generated/imageMap.ts is auto-generated by:
node scripts/processImages.mjs  
•	This script is automatically run before dev and build via package.json:  
```"scripts": {
  "dev": "node scripts/processImages.mjs && next dev",
  "build": "node scripts/processImages.mjs && next build"
}
```
•	Do not manually edit imageMap.ts.
________________________________________
## ✅ Benefits of This Strategy
•	✅ Full Next.js image optimization for local assets  
•	✅ Seamless support for remote images  
•	✅ Clear naming convention (generated-) for maintainability  
•	✅ CMS flexibility with minimal integration requirements  
•	✅ Future-proof: scalable for asset systems, CDNs, or DAMs  
