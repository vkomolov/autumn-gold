# ğŸ–¼ï¸ Image Strategy in This Project:

This project uses a **hybrid image strategy** to support both optimized local images and dynamic external images
(e.g., from a headless CMS like Strapi).

This approach provides full support for Next.js `StaticImageData`-based
optimization without sacrificing the flexibility of dynamic content.

## ğŸ“ Project Structure:

```
src/
â”œâ”€ assets/
â”‚  â””â”€ images/
â”‚     â”œâ”€ logo/
â”‚     â”‚  â””â”€ logo-autumn.webp
â”‚     â””â”€ products/
â”‚         â””â”€ item-1.webp
â”œâ”€ lib/
â”‚  â””â”€ generated/
â”‚     â””â”€ imageMap.ts â† this file will be automatically generated
```

## ğŸ’¡ Key Concepts

### 1. **Generated Images**

Images stored locally in `src/assets/images/**` can be processed and used with Next.js's `next/image` component with
full optimization. These are registered during dev/build time by the script `scripts/processImagesOldVer.ts`.
Each image is added to a generated `imageMap` with a key that follows the format:
"generated-<filename.ext>"

Example:

```ts
import { imageMap } from "@/lib/generated/imageMap";
const img = imageMap["generated-logo-autumn.webp"];
```

These images are pre-optimized, include dimensions, and support blur placeholders, lazy loading, etc.

### 2. Dynamic Images

When an image source does not start with generated-, it is treated as a dynamic or external image â€” either from the public/ folder or from a remote CDN.
Example:
<Image
src="/images/hero-banner.webp" // served from /public
alt="Hero banner"
...
/>
Or:
<Image
src="https://cdn.example.com/product-1.webp"
alt="Product"
...
/>

## ğŸ” How the Component Works:

```
import { imageMap } from "@/lib/generated/imageMap";

export const SomeComponent = ({ src, alt, ...rest }) => {
  const isGenerated = src.startsWith("generated-");
  const image = isGenerated ? imageMap[src] : src;

  return <Image src={image} alt={alt} {...rest} />;
};
```

## ğŸ§© CMS Integration Guidelines

In your CMS (e.g., Strapi), when linking to an image:
â€¢ If it references a locally optimized image, store the key as:  
â€¢ generated-logo-autumn.webp  
â€¢ If the image is served from public/ or an external source, just store the full path or URL:  
â€¢ /images/team-photo.jpg  
â€¢ https://cdn.example.com/banner.png

---

## âš™ï¸ Developer Notes

â€¢ The file src/lib/generated/imageMap.ts is auto-generated by:
node scripts/processImagesOldVer.ts  
â€¢ This script is automatically run before dev and build via package.json:

```"scripts": {
  "dev": "node scripts/processImagesOldVer.ts && next dev",
  "build": "node scripts/processImagesOldVer.ts && next build"
}
```

â€¢ Do not manually edit imageMap.ts.

---

## âœ… Benefits of This Strategy

â€¢ âœ… Full Next.js image optimization for local assets  
â€¢ âœ… Seamless support for remote images  
â€¢ âœ… Clear naming convention (generated-) for maintainability  
â€¢ âœ… CMS flexibility with minimal integration requirements  
â€¢ âœ… Future-proof: scalable for asset systems, CDNs, or DAMs
